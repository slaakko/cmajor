using System;
using System.IO;

namespace Test.System.IO.StringStream
{
    public unit_test void InputStringStreamTest()
    {
        InputStringStream s0;
        #assert(s0.GetStr().IsEmpty());
        #assert(s0.EndOfStream());
        string l0 = s0.ReadLine();
        #assert(l0.IsEmpty());
        #assert(s0.EndOfStream());
        string e0 = s0.ReadToEnd();
        #assert(e0.IsEmpty());
        #assert(s0.EndOfStream());

        InputStringStream s1;
        s1.SetStr("a");
        #assert(!s1.GetStr().IsEmpty());
        #assert(s1.GetStr() == "a");
        string l1 = s1.ReadLine();
        #assert(l1 == "a");
        #assert(s1.EndOfStream());
        s1.SetStr("a");
        #assert(s1.GetStr() == "a");
        string e1 = s1.ReadToEnd();
        #assert(e1 == "a");
        #assert(s1.EndOfStream());

        InputStringStream s2;
        s2.SetStr("\n");
        #assert(!s2.GetStr().IsEmpty());
        #assert(s2.GetStr() == "\n");
        string l2 = s2.ReadLine();
        #assert(l2.IsEmpty());
        #assert(s2.EndOfStream());
        s2.SetStr("\n");
        #assert(s2.GetStr() == "\n");
        string e2 = s2.ReadToEnd();
        #assert(e2 == "\n");
        #assert(s2.EndOfStream());

        InputStringStream s3;
        s3.SetStr("a\n");
        #assert(!s3.GetStr().IsEmpty());
        #assert(s3.GetStr() == "a\n");
        string l3 = s3.ReadLine();
        #assert(!l3.IsEmpty());
        #assert(l3 == "a");
        #assert(s3.EndOfStream());
        s3.SetStr("a\n");
        #assert(s3.GetStr() == "a\n");
        string e3 = s3.ReadToEnd();
        #assert(e3 == "a\n");
        #assert(s3.EndOfStream());

        InputStringStream s4;
        s4.SetStr("\na");
        #assert(!s4.GetStr().IsEmpty());
        #assert(s4.GetStr() == "\na");
        string l4 = s4.ReadLine();
        #assert(l4.IsEmpty());
        #assert(!s4.EndOfStream());
        string l42 = s4.ReadLine();
        #assert(l42 == "a");
        #assert(s4.EndOfStream());
        s4.SetStr("\na");
        #assert(s4.GetStr() == "\na");
        string e4 = s4.ReadToEnd();
        #assert(e4 == "\na");
        #assert(s4.EndOfStream());

        InputStringStream s5;
        s5.SetStr("alpha\nbeta\ngamma\n");
        #assert(!s5.GetStr().IsEmpty());
        #assert(s5.GetStr() == "alpha\nbeta\ngamma\n");
        string l51 = s5.ReadLine();
        #assert(!s5.EndOfStream());
        #assert(l51 == "alpha");
        string l52 = s5.ReadLine();
        #assert(!s5.EndOfStream());
        #assert(l52 == "beta");
        string l53 = s5.ReadLine();
        #assert(s5.EndOfStream());
        #assert(l53 == "gamma");
        s5.SetStr("alpha\nbeta\ngamma\n");
        string e5 = s5.ReadToEnd();
        #assert(e5 == "alpha\nbeta\ngamma\n");
        #assert(s5.EndOfStream());
    }

    public unit_test void OutputStringStreamTest()
    {
        OutputStringStream s;
        s.WriteLine();
        s.WriteLine("foo");
        s.WriteLine(string("bar"));
        s.WriteLine('x');
        s.WriteLine(MinValue<byte>());
        s.WriteLine(byte(127u));
        s.WriteLine(MaxValue<byte>());
        s.WriteLine(MinValue<sbyte>());
        s.WriteLine(sbyte(0));
        s.WriteLine(MaxValue<sbyte>());
        s.WriteLine(MinValue<short>());
        s.WriteLine(short(0));
        s.WriteLine(MaxValue<short>());
        s.WriteLine(MinValue<ushort>());
        s.WriteLine(ushort(32767u));
        s.WriteLine(MaxValue<ushort>());
        s.WriteLine(MinValue<int>());
        s.WriteLine(int(0));
        s.WriteLine(MaxValue<int>());
        s.WriteLine(MinValue<uint>());
        s.WriteLine(uint(2147483647u));
        s.WriteLine(MaxValue<uint>());
        s.WriteLine(MinValue<long>());
        s.WriteLine(long(0));
        s.WriteLine(MaxValue<long>());
        s.WriteLine(MinValue<ulong>());
        s.WriteLine(ulong(9223372036854775807u));
        s.WriteLine(MaxValue<ulong>());
        s.WriteLine(false);
        s.WriteLine(true);
        s.WriteLine(0.0f);
        s.WriteLine(0.0);

        InputStringStream i(s.GetStr());
        string se = i.ReadLine();
        #assert(se.IsEmpty());
        string s0 = i.ReadLine();
        #assert(s0 == "foo");
        string s1 = i.ReadLine();
        #assert(s1 == "bar");
        string s2 = i.ReadLine();
        #assert(s2 == "x");
        string s3 = i.ReadLine();
        #assert(s3 == "0");
        string s4 = i.ReadLine();
        #assert(s4 == "127");
        string s5 = i.ReadLine();
        #assert(s5 == "255");
        string s6 = i.ReadLine();
        #assert(s6 == "-128");
        string s7 = i.ReadLine();
        #assert(s7 == "0");
        string s8 = i.ReadLine();
        #assert(s8 == "127");
        string s9 = i.ReadLine();
        #assert(s9 == "-32768");
        string s10 = i.ReadLine();
        #assert(s10 == "0");
        string s11 = i.ReadLine();
        #assert(s11 == "32767");
        string s12 = i.ReadLine();
        #assert(s12 == "0");
        string s13 = i.ReadLine();
        #assert(s13 == "32767");
        string s14 = i.ReadLine();
        #assert(s14 == "65535");
        string s15 = i.ReadLine();
        #assert(s15 == "-2147483648");
        string s16 = i.ReadLine();
        #assert(s16 == "0");
        string s17 = i.ReadLine();
        #assert(s17 == "2147483647");
        string s18 = i.ReadLine();
        #assert(s18 == "0");
        string s19 = i.ReadLine();
        #assert(s19 == "2147483647");
        string s20 = i.ReadLine();
        #assert(s20 == "4294967295");
        string s21 = i.ReadLine();
        #assert(s21 == "-9223372036854775808");
        string s22 = i.ReadLine();
        #assert(s22 == "0");
        string s23 = i.ReadLine();
        #assert(s23 == "9223372036854775807");
        string s24 = i.ReadLine();
        #assert(s24 == "0");
        string s25 = i.ReadLine();
        #assert(s25 == "9223372036854775807");
        string s26 = i.ReadLine();
        #assert(s26 == "18446744073709551615");
        string s27 = i.ReadLine();
        #assert(s27 == "false");
        string s28 = i.ReadLine();
        #assert(s28 == "true");
        string s29 = i.ReadLine();
        #assert(s29 == "0");
        string s30 = i.ReadLine();
        #assert(s30 == "0");
        #assert(i.EndOfStream());
    }
}
